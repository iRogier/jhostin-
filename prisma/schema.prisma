generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Specialty {
  id          Int      @id @default(autoincrement()) @map("specialty_id")
  name        String   @db.VarChar(255)
  description String?  @db.Text

  teachers    Teacher[]  @relation("SpecialtyTeachers")

  @@map("specialties")
}

model Teacher {
  id             Int       @id @default(autoincrement()) @map("teacher_id")
  firstName      String    @db.VarChar(255) @map("first_name")
  lastName       String    @db.VarChar(255) @map("last_name")
  email          String    @db.VarChar(255)
  phone          String?   @db.VarChar(50) @map("phone")
  specialtyId    Int?      @map("specialty_id")
  specialty      Specialty? @relation("SpecialtyTeachers", fields: [specialtyId], references: [id])

  subjects       Subject[]  @relation("TeacherSubjects")

  @@map("teachers")
}

model Degree {
  id        Int      @id @default(autoincrement()) @map("degree_id")
  name      String   @db.VarChar(255)
  duration  String?  @db.VarChar(100)

  subjects  Subject[]
  students  Student[]

  @@map("degrees")
}

model Cycle {
  id          Int      @id @default(autoincrement()) @map("cycle_id")
  name        String   @db.VarChar(255)
  description String?  @db.Text

  subjects    Subject[]
  students    Student[]

  @@map("cycles")
}

model Subject {
  id          Int     @id @default(autoincrement()) @map("subject_id")
  name        String  @db.VarChar(255)
  description String? @db.Text
  teacherId   Int?    @map("teacher_id")
  degreeId    Int?    @map("degree_id")
  cycleId     Int?    @map("cycle_id")

  teacher     Teacher? @relation("TeacherSubjects", fields: [teacherId], references: [id])
  degree      Degree?  @relation(fields: [degreeId], references: [id])
  cycle       Cycle?   @relation(fields: [cycleId], references: [id])

  @@map("subjects")
}

model Student {
  id         Int     @id @default(autoincrement()) @map("student_id")
  firstName  String  @db.VarChar(255) @map("first_name")
  lastName   String  @db.VarChar(255) @map("last_name")
  email      String  @db.VarChar(255)
  degreeId   Int?    @map("degree_id")
  cycleId    Int?    @map("cycle_id")

  degree     Degree? @relation(fields: [degreeId], references: [id])
  cycle      Cycle?  @relation(fields: [cycleId], references: [id])

  @@map("students")
}
